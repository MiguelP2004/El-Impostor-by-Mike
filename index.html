<!doctype html>
<html lang="es">
<head>
  <title>El Impostor</title>
  <meta name="apple-mobile-web-app-title" content="Impostor by Mike">
  <link rel="apple-touch-icon" sizes="180x180" href="indiBola.png">


  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover" />
  
  <meta name="description" content="Juego del impostor creado por Mike">

  <!-- PWA & icons: usa rutas relativas (sin / inicial) -->
  <link rel="manifest" href="manifest.json">

  <!-- iOS home screen icon -->
  <link rel="apple-touch-icon" href="indiBola.png">
  <link rel="apple-touch-icon" sizes="180x180" href="indiBola.png">

  <!-- General icons (PWA / Android) -->
  <link rel="icon" type="image/png" sizes="192x192" href="indiBola.png">
  <link rel="icon" type="image/png" sizes="512x512" href="indiBola.png">
  <link rel="icon" href="indiBola.png">

  <meta name="theme-color" content="#ffc107">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="Impostor by Mike">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#1a1a2e;
      --bg2:#16213e;
      --accent:#ffc107;
      --accent2:#ffeb3b;
      --card:#2a2d3a;
      --card-light:#353847;
      --muted:#d0d3e1;
      --text:#f0f1f5;
      --round:20px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:'Poppins', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: #1a1635;
      min-height:100vh;
      min-height:-webkit-fill-available;
      display:flex;
      align-items:center;
      justify-content:center;
      /* el scroll se hace en el body, los c√≠rculos son fixed y no se mueven */
      overflow-x:hidden;
      overflow-y:auto;
      -webkit-overflow-scrolling:touch;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      user-select: none;
      touch-action: pan-y;
    }
    
    html {
      touch-action: manipulation;
      height:100%;
    }
    
    input, button, select, textarea {
      touch-action: manipulation;
    }
    
    /* Animated background circles */
    .bg-circle{
      position:fixed;          /* ya fija los c√≠rculos al viewport */
      border-radius:50%;
      background:rgba(255,255,255,0.03);
      pointer-events:none;
      z-index:0;
    }
    
    @keyframes floatCircle1 {
      0% { transform:translate(0, 0) scale(1); opacity:0; }
      10% { opacity:1; }
      90% { opacity:1; }
      100% { transform:translate(100vw, -100vh) scale(1.5); opacity:0; }
    }
    
    @keyframes floatCircle2 {
      0% { transform:translate(0, 0) scale(1); opacity:0; }
      10% { opacity:1; }
      90% { opacity:1; }
      100% { transform:translate(-100vw, 100vh) scale(1.2); opacity:0; }
    }
    
    @keyframes floatCircle3 {
      0% { transform:translate(0, 0) scale(1); opacity:0; }
      10% { opacity:1; }
      90% { opacity:1; }
      100% { transform:translate(80vw, 90vh) scale(1.3); opacity:0; }
    }
    
    .container{
      width:100%;
      max-width:550px;
      background:linear-gradient(180deg, rgba(42,45,58,0.98), rgba(35,38,48,0.95));
      border-radius:24px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      padding:22px;
      animation: float 6s ease-in-out infinite;
      position:relative;
      z-index:1;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-15px); }
    }
    
    header{display:flex;gap:12px;align-items:center;margin-bottom:12px;justify-content:center;text-align:center;flex-direction:row}
    .dog-logo{
      width:70px;
      height:70px;
      border-radius:50%;
      object-fit:cover;
      border:4px solid #ffc107;
      box-shadow:0 6px 18px rgba(255,193,7,0.4);
      /* animaci√≥n lenta de balanceo continua */
      animation:wobble 4s ease-in-out infinite;
    }
    
    @keyframes wobble {
      0%, 100% { transform:rotate(-3deg); }
      50% { transform:rotate(3deg); }
    }
    
    h1{font-family:'Fredoka One',cursive;margin:0;font-size:20px;text-align:center;color:#ffc107;text-shadow:0 2px 8px rgba(255,193,7,0.3)}
    p.lead{margin:0;color:#d0d3e1;text-align:center}
    .title-wrapper{display:flex;flex-direction:column;align-items:flex-start}

    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px}
    label{display:block;font-size:13px;color:#f0f1f5;margin-bottom:6px;text-align:center;font-weight:600}
    input[type=number], input[type=text], select{width:100%;padding:10px;border-radius:12px;border:1px solid rgba(255,193,7,0.3);background:var(--card-light);color:var(--text);font-size:16px;transition:all 0.3s ease;touch-action:manipulation}
    input[type=text]:focus{outline:none;border-color:#ffc107;box-shadow:0 0 0 3px rgba(255,193,7,0.25);transform:scale(1.02)}
    input[type=text]::placeholder{color:#9a9dad;font-weight:400}
    
    /* Name input styling */
    .name-input-wrapper{position:relative;margin-bottom:8px}
    .name-input-wrapper input{font-weight:500}
    
    /* Inputs de nombre con estilo de juego */
    .name-input {
      font-family:'Fredoka One',cursive;
      font-size:18px;
      letter-spacing:0.5px;
      text-transform:none;
    }
    
    /* Counter buttons */
    .counter{display:flex;align-items:center;justify-content:center;gap:12px;margin-top:4px}
    .counter-btn{width:40px;height:40px;border-radius:50%;background:linear-gradient(180deg,#ffc107,#ffb300);color:#3e2723;font-weight:700;border:none;cursor:pointer;font-size:20px;display:flex;align-items:center;justify-content:center;box-shadow:0 3px 10px rgba(255,193,7,0.4);transition:all 0.2s ease}
    .counter-btn:hover{transform:scale(1.1);box-shadow:0 5px 16px rgba(255,193,7,0.6)}
    .counter-btn:active{transform:scale(0.95);box-shadow:0 2px 6px rgba(255,193,7,0.5)}
    .counter-value{font-size:28px;font-weight:700;color:#ffc107;min-width:50px;text-align:center;text-shadow:0 2px 4px rgba(255,193,7,0.2)}
    
    .btn{display:inline-block;padding:12px 16px;border-radius:14px;background:linear-gradient(180deg,#ffc107,#ffb300);color:#3e2723;font-weight:700;text-align:center;border:none;cursor:pointer;box-shadow:0 6px 16px rgba(255,193,7,0.4);transition:all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55)}
    .btn:hover{transform:translateY(-4px) scale(1.05);box-shadow:0 10px 24px rgba(255,193,7,0.6)}
    .btn:active{transform:translateY(-2px) scale(1.02);box-shadow:0 5px 12px rgba(255,193,7,0.5)}
    .btn.big{padding:16px 32px;font-size:20px;font-family:'Fredoka One',cursive}
    .btn.medium{padding:14px 24px;font-size:18px;font-family:'Fredoka One',cursive}
    .btn.secondary{background:linear-gradient(180deg,#ffeb3b,#fff59d);color:#3e2723;box-shadow:0 6px 16px rgba(255,235,59,0.35)}
    .btn.secondary:hover{box-shadow:0 10px 24px rgba(255,235,59,0.5)}
    .btn.secondary:active{box-shadow:0 5px 12px rgba(255,235,59,0.4)}
    .center{text-align:center}

    .card{background:linear-gradient(180deg,rgba(42,45,58,0.95),rgba(35,38,48,0.92));border-radius:18px;padding:18px;box-shadow:0 8px 20px rgba(12,20,40,0.4);text-align:center;border:1px solid rgba(255,193,7,0.2)}

    /* Role card */
    .role-card{min-height:220px;display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:16px;padding:20px}
    .player-indicator{font-size:24px;color:#ffc107;font-weight:700;margin-bottom:4px;text-shadow:0 2px 6px rgba(255,193,7,0.4);font-family:'Fredoka One',cursive}
    .player-number{font-size:14px;color:#d0d3e1;font-weight:600;margin-bottom:12px}
    .word{font-family:'Fredoka One',cursive;font-size:48px;color:#4fd1c5;margin-top:16px;animation:popIn 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);text-shadow:0 4px 12px rgba(79,209,197,0.6)}
    .impostor-badge{font-family:'Fredoka One',cursive;color:white;background:#ff3b3b;padding:10px 14px;border-radius:999px;font-size:20px;animation:shake 0.5s ease-in-out;box-shadow:0 4px 12px rgba(255,59,59,0.5)}
    .civil-badge{font-family:'Fredoka One',cursive;color:white;background:#4fd1c5;padding:10px 14px;border-radius:999px;font-size:20px;animation:popIn 0.5s ease-in-out;box-shadow:0 4px 12px rgba(79,209,197,0.5)}
    
    @keyframes popIn {
      0% { transform:scale(0); opacity:0; }
      50% { transform:scale(1.1); }
      100% { transform:scale(1); opacity:1; }
    }
    
    @keyframes shake {
      0%, 100% { transform:translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform:translateX(-5px); }
      20%, 40%, 60%, 80% { transform:translateX(5px); }
    }
    
    @keyframes slideIn {
      from { transform:translateY(20px); opacity:0; }
      to { transform:translateY(0); opacity:1; }
    }
    
    .role-card > * {
      animation:slideIn 0.3s ease-out forwards;
    }
    
    .role-card > *:nth-child(2) {
      animation-delay:0.1s;
      opacity:0;
    }

    /* Voting list */
    .players-list{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;margin-top:10px}
    .player-pill{padding:12px;border-radius:12px;background:linear-gradient(180deg,var(--card-light),var(--card));color:#f0f1f5;text-align:center;border:1px solid rgba(255,193,7,0.2);cursor:pointer;transition:all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);font-weight:600;position:relative;overflow:hidden}
    .player-pill::before{content:'';position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:rgba(255,193,7,0.2);transition:width 0.3s ease, height 0.3s ease;transform:translate(-50%,-50%)}
    .player-pill:hover{border-color:rgba(255,193,7,0.6);transform:translateY(-4px) scale(1.05);box-shadow:0 6px 18px rgba(255,193,7,0.3)}
    .player-pill:hover::before{width:200%;height:200%}
    .player-pill.selected{outline:4px solid rgba(255,193,7,0.7);background:linear-gradient(180deg,rgba(255,193,7,0.3),rgba(255,193,7,0.2));border-color:#ffc107;transform:translateY(-2px) scale(1.03);box-shadow:0 8px 20px rgba(255,193,7,0.4)}
    .muted{color:#d0d3e1}
    .impostor-reveal{display:inline-block;background:linear-gradient(135deg,#ff3b3b,#ff6b6b);color:#2a2d3a;padding:8px 16px;border-radius:999px;font-family:'Fredoka One',cursive;font-size:16px;margin-top:8px;margin-left:4px;margin-right:4px;box-shadow:0 4px 12px rgba(255,59,59,0.4);animation:popIn 0.5s ease-out}
    
    /* Countdown timer */
    .countdown-screen{
      position:fixed;
      top:0;
      left:0;
      right:0;
      bottom:0;
      background:rgba(0,0,0,0.95);
      z-index:9999;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .countdown-number{
      font-family:'Fredoka One',cursive;
      font-size:80px;
      color:#ffc107;
      text-shadow:0 10px 40px rgba(255,193,7,0.8);
      animation:countdownPulse 1s ease-out;
    }
    @keyframes countdownPulse {
      0% { transform:scale(0); opacity:0; }
      50% { transform:scale(1.2); }
      100% { transform:scale(1); opacity:1; }
    }
    
    .first-speaker{
      font-size:22px;
      color:#4fd1c5;
      font-weight:700;
      margin-bottom:16px;
      text-shadow:0 3px 10px rgba(79,209,197,0.6);
      font-family:'Fredoka One',cursive;
      animation:popIn 0.6s ease-out;
    }
    
    footer{
      margin-top:14px;
      display:flex;
      gap:8px;
      justify-content:center;
      color:#a0a3b5;
      text-align:center;
      font-weight:700;
    }

    @media(max-width:720px){
      .grid{grid-template-columns:1fr}
      header{flex-direction:column}
      .title-wrapper{align-items:center}
      .countdown-number{font-size:60px}
      .intro-title{font-size:30px}
      .intro-logo{width:115px;height:115px}
    }

    /* Ajuste extra para iPhone / m√≥viles estrechos:
       deja un poco de hueco lateral a la interfaz */
    @media (max-width: 420px) {
      .container{
        width: calc(100% - 32px); /* 16px de margen a cada lado */
        max-width: 420px;
        margin: 0 auto;
        padding-inline: 16px;     /* un poco menos de padding horizontal */
      }
    }

    .intro-screen{
      position:fixed;
      inset:0;
      background:radial-gradient(circle at top, #2d1b4e 0, #1a1635 45%, #05020a 100%);
      z-index:10000;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      gap:18px;
      /* nuevo: contenedor interno centrado y limitado al ancho de la carta */
    }
    /* capa de oscuridad con ‚Äúagujero‚Äù centrado m√°s peque√±o */
    .intro-screen::before{
      content:'';
      position:fixed;
      inset:0;
      pointer-events:none;
      /* c√≠rculo claro m√°s peque√±o centrado sobre la interfaz */
      background:
        radial-gradient(
          circle at 50% 50%,
          rgba(0,0,0,0) 0,
          rgba(0,0,0,0) 130px,
          rgba(0,0,0,0.95) 220px,
          rgba(0,0,0,0.98) 100%
        );
      z-index:-1;
    }
    .intro-logo{
      width:140px;
      height:140px;
      border-radius:50%;
      border:5px solid #ffc107;
      box-shadow:0 0 40px rgba(255,193,7,0.7);
      object-fit:cover;
      opacity:0;
      transform:scale(0.6);
      animation:introZoomSoft 0.9s ease-out forwards;
    }
    .intro-title{
      font-family:'Fredoka One',cursive;
      font-size:40px;
      letter-spacing:2px;
      color:#ffc107;
      text-shadow:0 4px 16px rgba(0,0,0,0.9);
      opacity:0;
      transform:translateY(10px);
      animation:introFadeUp 0.7s ease-out 0.25s forwards;
    }
    .intro-subtitle{
      font-size:16px;
      color:#4fd1c5;
      font-weight:600;
      opacity:0;
      transform:translateY(10px);
      animation:introFadeUp 0.7s ease-out 0.55s forwards;
    }

    /* Barra de carga de la intro */
    .intro-progress {
      width: 180px;
      height: 6px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.12);
      overflow: hidden;
      box-shadow: 0 0 16px rgba(0,0,0,0.6);
    }
    .intro-progress-fill {
      width: 0%;
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(90deg, #ffeb3b, #ffc107, #ff9800);
      animation: introProgressFill 3s linear forwards;
    }
    @keyframes introProgressFill {
      from { width: 0%; }
      to   { width: 100%; }
    }

    .intro-glow{
      position:absolute;
      /* c√≠rculo m√°s peque√±o y bien centrado */
      width:180px;
      height:180px;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      border-radius:50%;
      background:radial-gradient(circle, rgba(255,193,7,0.25), transparent 60%);
      filter:blur(6px);
      opacity:0;
      animation:introGlow 0.9s ease-out forwards;
    }
    @keyframes introZoomSoft{
      from{opacity:0;transform:scale(0.6);}
      to{opacity:1;transform:scale(1);}
    }
    @keyframes introFadeUp{
      from{opacity:0;transform:translateY(10px);}
      to{opacity:1;transform:translateY(0);}
    }
    @keyframes introGlow{
      from{opacity:0;transform:translate(-50%,-50%) scale(0.6);}
      to{opacity:1;transform:translate(-50%,-50%) scale(1);}
    }
    .intro-screen.fade-out{
      animation:introFadeOut 0.4s ease-out forwards;
    }
    @keyframes introFadeOut{
      to{opacity:0;visibility:hidden;}
    }
    .mode-buttons{
      display:flex;
      flex-direction:column;
      gap:14px;
      align-items:center;
    }
    .mode-buttons-row{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
      gap:16px;
      width:100%;
    }
    .mode-buttons-row.single{
      grid-template-columns:minmax(180px,1fr);
      max-width:420px;
      margin:0 auto;
    }
    .category-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
      gap:12px;
    }
    .category-grid .btn{
      width:100%;
    }
    .category-btn{
      padding:10px 14px;
      font-size:16px;
      font-family:'Fredoka One',cursive;
      background:linear-gradient(180deg,#7fb4ff,#3a7bff);
      color:#0e1c33;
      display:block;
      text-align:center;
      box-shadow:0 6px 16px rgba(32,87,204,0.4);
    }
    #categoryModeBtn{
      background:linear-gradient(180deg,#ff8a8a,#ff4d4d);
      color:#141010;
      box-shadow:0 8px 22px rgba(255,77,77,0.45);
      width:100%;
    }
    #categoryModeBtn:hover{
      box-shadow:0 12px 28px rgba(255,77,77,0.6);
    }
    #categoryModeBtn:active{
      box-shadow:0 6px 16px rgba(255,77,77,0.4);
    }
    .impostor-clue{
      margin-top:12px;
      text-align:center;
    }
    .impostor-clue-label{
      display:block;
      font-size:16px;
      color:#f0f1f5;
      font-family:'Poppins', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      margin-bottom:4px;
    }
    .impostor-clue-word{
      display:block;
      font-size:34px;
      color:#ffffff;
      font-weight:800;
      letter-spacing:0.6px;
      text-shadow:0 4px 14px rgba(255,255,255,0.45);
    }
    .category-banner{
      display:none;
      margin:8px 0 16px;
      padding:12px 18px;
      border-radius:16px;
      background:linear-gradient(90deg,rgba(255,193,7,0.2),rgba(255,255,255,0.08));
      color:#fdf6c3;
      font-family:'Fredoka One',cursive;
      text-align:center;
      box-shadow:0 6px 18px rgba(0,0,0,0.25);
    }
  </style>
</head>
<body>
  <!-- INTRO -->
  <div class="intro-screen" id="introScreen">
    <div class="intro-glow"></div>
    <img src="indiBola.png" alt="Logo" class="intro-logo">
    <div class="intro-title">EL IMPOSTOR</div>
    <div class="intro-subtitle">creado por Mike</div>
    <!-- Barra de cargando de la intro -->
    <div class="intro-progress">
      <div class="intro-progress-fill"></div>
    </div>
  </div>

  <div class="container" id="mainContainer" style="opacity:0">
    <header>
      <img src="indiBola.png" alt="Logo" class="dog-logo">
      <div class="title-wrapper">
        <h1>El Impostor</h1>
        <p class="lead">creado por Mike</p>
      </div>
    </header>
    <div id="activeCategoryBanner" class="category-banner"></div>

  <main id="app">
      <!-- SETUP SCREEN -->
      <section id="setup" class="card">
        <div class="grid">
          <div>
            <label>Jugadores</label>
            <div class="counter">
              <button class="counter-btn" id="decPlayers">‚àí</button>
              <div class="counter-value" id="playersDisplay">4</div>
              <button class="counter-btn" id="incPlayers">+</button>
            </div>
          </div>
          <div>
            <label>Impostores</label>
            <div class="counter">
              <button class="counter-btn" id="decImpostors">‚àí</button>
              <div class="counter-value" id="impostorsDisplay">1</div>
              <button class="counter-btn" id="incImpostors">+</button>
            </div>
          </div>
        </div>
        <div style="margin-top:12px" class="center mode-buttons">
          <div class="mode-buttons-row">
            <button class="btn big" id="standardModeBtn">Modo est√°ndar</button>
            <button class="btn big secondary" id="clueModeBtn">Modo con PISTA!! üîç</button>
          </div>
          <div class="mode-buttons-row single">
            <button class="btn big" id="categoryModeBtn">Por categor√≠as üß©</button>
          </div>
        </div>
      </section>

      <!-- CATEGORY SELECTION -->
      <section id="categorySelection" class="card" style="display:none;margin-top:12px">
        <div class="center">
          <p style="font-family:'Fredoka One',cursive;font-size:18px;color:#ffc107;margin-bottom:16px;text-shadow:0 2px 6px rgba(255,193,7,0.3)">Elige la categor√≠a</p>
          <div class="category-grid" id="categoryButtons"></div>
        </div>
      </section>

      <!-- NAMES SCREEN -->
      <section id="names" class="card" style="display:none;margin-top:12px">
        <div class="center">
          <p style="font-family:'Fredoka One',cursive;font-size:18px;color:#ffc107;margin-bottom:16px;text-shadow:0 2px 6px rgba(255,193,7,0.3)">Jugadores</p>
          <div id="namesList" style="display:grid;gap:10px;margin-bottom:16px"></div>
          <button class="btn big" id="startBtn">Empezar partida</button>
        </div>
      </section>

      <!-- PASS & REVEAL SCREEN -->
      <section id="pass" class="card" style="display:none;margin-top:12px">
        <div class="center">
          <div class="player-indicator" id="playerIndicator">Mike</div>
          <div class="player-number" id="playerNumber">Jugador 2 de 4</div>
          <div style="height:8px"></div>
          <button class="btn big secondary" id="revealBtn">üîç Ver mi rol</button>
        </div>
        <div style="height:12px"></div>
        <div id="roleArea" style="display:none;" class="role-card">
          <!-- role revealed content injected here -->
        </div>
        <div style="margin-top:12px;display:flex;gap:8px;justify-content:center">
          <button class="btn medium" id="nextBtn" style="display:none">Siguiente</button>
        </div>
      </section>

      <!-- DISCUSSION / VOTING -->
      <section id="discussion" class="card" style="display:none;margin-top:12px">
        <div class="center">
          <div class="first-speaker" id="firstSpeakerName" style="display:none"></div>
          <p class="muted">Hablad entre vosotros y decidid a qui√©n votar!!</p>
          <div style="height:8px"></div>
          <p class="muted" style="font-weight:700">Selecciona al jugador que quer√©is expulsar:</p>
          <div class="players-list" id="discussionVoteList" style="margin-top:10px"></div>
          <div style="height:12px"></div>
          <button class="btn big" id="submitGroupVoteBtn">Confirmar votaci√≥n</button>
        </div>
      </section>

      <!-- RESULTS -->
      <section id="results" class="card" style="display:none;margin-top:12px">
        <div id="resultText" class="center"></div>
        <div style="height:12px"></div>
        <div id="impostorsReveal" class="center muted" style="font-weight:700"></div>
        <div style="height:12px"></div>
        <div class="center" id="newGameContainer">
          <button class="btn big secondary" id="newGame">Reiniciar partida</button>
        </div>
      </section>

    </main>

    <footer style="margin-top:12px">He hecho este juego porque me aburr√≠a la verdad...</footer>
  </div>

  <script>
    // Register Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('sw.js').then(function(registration) {
          console
          console.log('ServiceWorker registrado con √©xito:', registration.scope);
        }, function(err) {
          console.log('ServiceWorker registro fallido:', err);
        });
      });
    }

    // --- C√çRCULOS DE FONDO ANIMADOS ---
    function createBackgroundCircle() {
      const circle = document.createElement('div');
      circle.className = 'bg-circle';
      
      const size = Math.random() * 220 + 100;       // un poco m√°s peque√±os: 100‚Äì320 px
      circle.style.width = size + 'px';
      circle.style.height = size + 'px';
      
      // Posici√≥n m√°s cerca del centro de la pantalla
      const vw = window.innerWidth;
      const vh = window.innerHeight;
      const centerX = vw * 0.5;
      const centerY = vh * 0.5;
      const offsetX = (Math.random() - 0.5) * vw * 0.6;  // rango m√°s estrecho
      const offsetY = (Math.random() - 0.5) * vh * 0.6;
      const startX = centerX + offsetX;
      const startY = centerY + offsetY;
      circle.style.left = startX + 'px';
      circle.style.top = startY + 'px';
      
      const animations = ['floatCircle1', 'floatCircle2', 'floatCircle3'];
      const randomAnim = animations[Math.floor(Math.random() * animations.length)];
      const duration = Math.random() * 14 + 14;     // algo m√°s r√°pidas: 14‚Äì28 s
      
      circle.style.animation = `${randomAnim} ${duration}s linear forwards`;
      
      document.body.appendChild(circle);
      
      setTimeout(() => {
        circle.remove();
      }, duration * 1000);
    }

    // Crear algunos c√≠rculos iniciales
    for (let i = 0; i < 6; i++) {
      setTimeout(() => createBackgroundCircle(), i * 1200);
    }

    // M√°s frecuencia: cada 4s en vez de 6s
    setInterval(() => {
      createBackgroundCircle();
    }, 4000);
    // --- FIN C√çRCULOS DE FONDO ---

    // --- AUDIO UNLOCK PATCH ---
    let sharedAudioCtx = null;
    let audioUnlocked = false;

    function createSharedAudioContext(){
      if(!sharedAudioCtx){
        sharedAudioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }
      return sharedAudioCtx;
    }

    async function unlockAudioWithUserGesture(){
      try {
        const ctx = createSharedAudioContext();
        if(ctx.state === 'suspended') await ctx.resume();
        const buffer = ctx.createBuffer(1, 1, 22050);
        const src = ctx.createBufferSource();
        src.buffer = buffer;
        src.connect(ctx.destination);
        src.start(0);
        audioUnlocked = true;
        return true;
      } catch (err) {
        console.warn('No se pudo desbloquear audio:', err);
        return false;
      }
    }

    // √öNICA funci√≥n playSound (la buena, compartida)
    function playSound(frequency, duration, volume = 0.3) {
      try {
        const ctx = createSharedAudioContext();
        if(ctx.state === 'suspended'){
          return; // se reanudar√° en unlockAudioWithUserGesture
        }
        const oscillator = ctx.createOscillator();
        const gainNode = ctx.createGain();
        oscillator.connect(gainNode);
        gainNode.connect(ctx.destination);
        oscillator.frequency.value = frequency;
        oscillator.type = 'sine';
        gainNode.gain.setValueAtTime(volume, ctx.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + Math.max(0.01, duration));
        oscillator.start(ctx.currentTime);
        oscillator.stop(ctx.currentTime + duration + 0.01);
      } catch (e) {
        // silencioso
      }
    }

    function playPopSound(){ playSound(800, 0.08, 0.22); }
    function playClickSound(){ playSound(400, 0.05, 0.15); }
    function playSuccessSound(){ 
      playSound(600, 0.06, 0.12); 
      setTimeout(()=>playSound(900,0.07,0.14),60); 
    }
    function playStartGameSound() {
      playSound(500, 0.1, 0.2);
      setTimeout(() => playSound(700, 0.1, 0.2), 80);
      setTimeout(() => playSound(900, 0.1, 0.22), 160);
      setTimeout(() => playSound(1200, 0.15, 0.25), 240);
    }
    // Antes: aqu√≠ sonaba el jingle inicial; ahora lo dejamos vac√≠o
    function playIntroSound() {
      // Sin sonido en la intro inicial
    }
    // --- FIN PATCH ---

    // --- Datos y estado ---
    const continueBtn = document.getElementById('continueBtn');
    const startBtn = document.getElementById('startBtn');
    const namesSection = document.getElementById('names');
    const namesList = document.getElementById('namesList');
    const pass = document.getElementById('pass');
    const revealBtn = document.getElementById('revealBtn');
    const roleArea = document.getElementById('roleArea');
    const nextBtn = document.getElementById('nextBtn');
    const playerIndicator = document.getElementById('playerIndicator');
    const playerNumber = document.getElementById('playerNumber');
    const discussion = document.getElementById('discussion');
    const discussionVoteList = document.getElementById('discussionVoteList');
    const submitGroupVoteBtn = document.getElementById('submitGroupVoteBtn');
    const results = document.getElementById('results');
    const resultText = document.getElementById('resultText');
    const impostorsReveal = document.getElementById('impostorsReveal');
    const newGame = document.getElementById('newGame');
    const newGameContainer = document.getElementById('newGameContainer');
    const standardModeBtn = document.getElementById('standardModeBtn');
    const clueModeBtn = document.getElementById('clueModeBtn');
    const categoryModeBtn = document.getElementById('categoryModeBtn');
    const categorySelection = document.getElementById('categorySelection');
    const categoryButtons = document.getElementById('categoryButtons');
    const activeCategoryBanner = document.getElementById('activeCategoryBanner');

const classifiedWords = [
  // OBJETO
  {word: 'cohete', category: 'OBJETO'},
  {word: 'reloj', category: 'OBJETO'},
  {word: 'caf√©', category: 'OBJETO'},
  {word: 'cami√≥n', category: 'OBJETO'},
  {word: 'playa', category: 'OBJETO'},
  {word: 'libro', category: 'OBJETO'},
  {word: 'estrella', category: 'OBJETO'},
  {word: '√°rbol', category: 'OBJETO'},
  {word: 'zapato', category: 'OBJETO'},
  {word: 'pelota', category: 'OBJETO'},
  {word: 'puerta', category: 'OBJETO'},
  {word: 'silla', category: 'OBJETO'},
  {word: 'mesa', category: 'OBJETO'},
  {word: 'l√°piz', category: 'OBJETO'},
  {word: 'tel√©fono', category: 'OBJETO'},
  {word: 'guitarra', category: 'OBJETO'},
  {word: 'piano', category: 'OBJETO'},
  {word: 'bicicleta', category: 'OBJETO'},
  {word: 'coche', category: 'OBJETO'},
  {word: 'avi√≥n', category: 'OBJETO'},
  {word: 'barco', category: 'OBJETO'},
  {word: 'paraguas', category: 'OBJETO'},
  {word: 'gafas', category: 'OBJETO'},
  {word: 'maleta', category: 'OBJETO'},
  {word: 'ordenador', category: 'OBJETO'},
  {word: 'teclado', category: 'OBJETO'},
  {word: 'c√°mara', category: 'OBJETO'},
  {word: 'micr√≥fono', category: 'OBJETO'},
  {word: 'auriculares', category: 'OBJETO'},
  {word: 'ventana', category: 'OBJETO'},
  {word: 'espejo', category: 'OBJETO'},
  {word: 'cuchillo', category: 'OBJETO'},
  {word: 'tenedor', category: 'OBJETO'},
  {word: 'cuchara', category: 'OBJETO'},
  {word: 'plato', category: 'OBJETO'},
  {word: 'vaso', category: 'OBJETO'},
  {word: 'botella', category: 'OBJETO'},
  {word: 'cepillo', category: 'OBJETO'},
  {word: 'toalla', category: 'OBJETO'},
  {word: 'almohada', category: 'OBJETO'},
  {word: 'manta', category: 'OBJETO'},
  {word: 'sof√°', category: 'OBJETO'},
  {word: 'l√°mpara', category: 'OBJETO'},
  {word: 'televisi√≥n', category: 'OBJETO'},
  {word: 'bater√≠a', category: 'OBJETO'},
  {word: 'viol√≠n', category: 'OBJETO'},
  {word: 'flauta', category: 'OBJETO'},
  {word: 'trompeta', category: 'OBJETO'},
  {word: 'saxof√≥n', category: 'OBJETO'},
  {word: 'clarinete', category: 'OBJETO'},
  {word: 'ukelele', category: 'OBJETO'},
  {word: 'pulsera', category: 'OBJETO'},
  {word: 'collar', category: 'OBJETO'},
  {word: 'cron√≥metro', category: 'OBJETO'},
  {word: 'granada', category: 'OBJETO'},
  {word: 'futbol√≠n', category: 'OBJETO'},
  {word: 'mesa de billar', category: 'OBJETO'},
  {word: 'i-pad', category: 'OBJETO'},
  {word: 'calendario', category: 'OBJETO'},
  {word: 'almohada', category: 'OBJETO'},

  // ALIMENTACI√ìN
  {word: 'pizza', category: 'ALIMENTACI√ìN'},
  {word: 'hamburguesa', category: 'ALIMENTACI√ìN'},
  {word: 'paella', category: 'ALIMENTACI√ìN'},
  {word: 'tacos', category: 'ALIMENTACI√ìN'},
  {word: 'pasta', category: 'ALIMENTACI√ìN'},
  {word: 'arroz', category: 'ALIMENTACI√ìN'},
  {word: 'pollo', category: 'ALIMENTACI√ìN'},
  {word: 'pescado', category: 'ALIMENTACI√ìN'},
  {word: 'carne', category: 'ALIMENTACI√ìN'},
  {word: 'ensalada', category: 'ALIMENTACI√ìN'},
  {word: 'sopa', category: 'ALIMENTACI√ìN'},
  {word: 'pan', category: 'ALIMENTACI√ìN'},
  {word: 'queso', category: 'ALIMENTACI√ìN'},
  {word: 'huevo', category: 'ALIMENTACI√ìN'},
  {word: 'chocolate', category: 'ALIMENTACI√ìN'},
  {word: 'helado', category: 'ALIMENTACI√ìN'},
  {word: 'galleta', category: 'ALIMENTACI√ìN'},
  {word: 'pastel', category: 'ALIMENTACI√ìN'},
  {word: 'donut', category: 'ALIMENTACI√ìN'},
  {word: 'zumo', category: 'ALIMENTACI√ìN'},
  {word: 'agua', category: 'ALIMENTACI√ìN'},
  {word: 'leche', category: 'ALIMENTACI√ìN'},
  {word: 't√©', category: 'ALIMENTACI√ìN'},
  {word: 'cerveza', category: 'ALIMENTACI√ìN'},
  {word: 'vino', category: 'ALIMENTACI√ìN'},
  {word: 'naranja', category: 'ALIMENTACI√ìN'},
  {word: 'pl√°tano', category: 'ALIMENTACI√ìN'},
  {word: 'manzana', category: 'ALIMENTACI√ìN'},
  {word: 'fresa', category: 'ALIMENTACI√ìN'},
  {word: 'sand√≠a', category: 'ALIMENTACI√ìN'},
  {word: 'mel√≥n', category: 'ALIMENTACI√ìN'},
  {word: 'uva', category: 'ALIMENTACI√ìN'},
  {word: 'pi√±a', category: 'ALIMENTACI√ìN'},
  {word: 'mango', category: 'ALIMENTACI√ìN'},
  {word: 'aguacate', category: 'ALIMENTACI√ìN'},
  {word: 'tomate', category: 'ALIMENTACI√ìN'},
  {word: 'lechuga', category: 'ALIMENTACI√ìN'},
  {word: 'zanahoria', category: 'ALIMENTACI√ìN'},
  {word: 'patata', category: 'ALIMENTACI√ìN'},
  {word: 'cebolla', category: 'ALIMENTACI√ìN'},
  {word: 'croissant', category: 'ALIMENTACI√ìN'},
  {word: 'ramen', category: 'ALIMENTACI√ìN'},

  // FAMOSO (PERSONA REAL)
  {word: 'Lionel Messi', category: 'FAMOSO'},
  {word: 'Cristiano Ronaldo', category: 'FAMOSO'},
  {word: 'Rafael Nadal', category: 'FAMOSO'},
  {word: 'LeBron James', category: 'FAMOSO'},
  {word: 'Michael Jordan', category: 'FAMOSO'},
  {word: 'Usain Bolt', category: 'FAMOSO'},
  {word: 'Roger Federer', category: 'FAMOSO'},
  {word: 'Serena Williams', category: 'FAMOSO'},
  {word: 'Tiger Woods', category: 'FAMOSO'},
  {word: 'Neymar Junior', category: 'FAMOSO'},
  {word: 'Kylian Mbapp√©', category: 'FAMOSO'},
  {word: 'Mohamed Salah', category: 'FAMOSO'},
  {word: 'Robert Lewandowski', category: 'FAMOSO'},
  {word: 'Zinedine Zidane', category: 'FAMOSO'},
  {word: 'Pel√©', category: 'FAMOSO'},
  {word: 'Diego Maradona', category: 'FAMOSO'},
  {word: 'Ronaldinho', category: 'FAMOSO'},
  {word: 'Andr√©s Iniesta', category: 'FAMOSO'},
  {word: 'Xavi Hern√°ndez', category: 'FAMOSO'},
  {word: 'Sergio Ramos', category: 'FAMOSO'},
  {word: 'Karim Benzema', category: 'FAMOSO'},
  {word: 'Luka Modriƒá', category: 'FAMOSO'},
  {word: 'Erling Haaland', category: 'FAMOSO'},
  {word: 'Vin√≠cius J√∫nior', category: 'FAMOSO'},
  {word: 'Gianluigi Buffon', category: 'FAMOSO'},
  {word: 'Zlatan Ibrahimovic', category: 'FAMOSO'},
  {word: 'Luis Su√°rez', category: 'FAMOSO'},
  {word: 'Kevin De Bruyne', category: 'FAMOSO'},
  {word: 'Harry Kane', category: 'FAMOSO'},
  {word: 'Son Heung-min', category: 'FAMOSO'},
  {word: 'Gareth Bale', category: 'FAMOSO'},
  {word: 'Antoine Griezmann', category: 'FAMOSO'},
  {word: 'Paulo Dybala', category: 'FAMOSO'},
  {word: 'Thibaut Courtois', category: 'FAMOSO'},
  {word: 'Venus Williams', category: 'FAMOSO'},
  {word: 'Carlos Alcaraz', category: 'FAMOSO'},
  {word: 'Rafa M√°rquez', category: 'FAMOSO'},
  {word: 'Lamine Yamal', category: 'FAMOSO'},
  {word: 'Nico Williams', category: 'FAMOSO'},
  {word: 'Daniel Carvajal', category: 'FAMOSO'},
  {word: 'Luka Modric', category: 'FAMOSO'},
  {word: 'Jannik Sinner', category: 'FAMOSO'},
  {word: 'John Cena', category: 'FAMOSO'},
  {word: 'Conor McGregor', category: 'FAMOSO'},
  {word: 'Ilia Topuria', category: 'FAMOSO'},
  {word: 'Randy Orton', category: 'FAMOSO'},
  {word: 'Leonardo DiCaprio', category: 'FAMOSO'},
  {word: 'Brad Pitt', category: 'FAMOSO'},
  {word: 'Tom Cruise', category: 'FAMOSO'},
  {word: 'Johnny Depp', category: 'FAMOSO'},
  {word: 'Will Smith', category: 'FAMOSO'},
  {word: 'Robert Downey Jr.', category: 'FAMOSO'},
  {word: 'Dwayne Johnson', category: 'FAMOSO'},
  {word: 'Chris Hemsworth', category: 'FAMOSO'},
  {word: 'Scarlett Johansson', category: 'FAMOSO'},
  {word: 'Jennifer Lawrence', category: 'FAMOSO'},
  {word: 'Emma Watson', category: 'FAMOSO'},
  {word: 'Natalie Portman', category: 'FAMOSO'},
  {word: 'Angelina Jolie', category: 'FAMOSO'},
  {word: 'Margot Robbie', category: 'FAMOSO'},
  {word: 'Zendaya Coleman', category: 'FAMOSO'},
  {word: 'Tom Holland', category: 'FAMOSO'},
  {word: 'Timoth√©e Chalamet', category: 'FAMOSO'},
  {word: 'Ana de Armas', category: 'FAMOSO'},
  {word: 'Pedro Pascal', category: 'FAMOSO'},
  {word: 'Javier Bardem', category: 'FAMOSO'},
  {word: 'Pen√©lope Cruz', category: 'FAMOSO'},
  {word: 'Antonio Banderas', category: 'FAMOSO'},
  {word: 'Mel Gibson', category: 'FAMOSO'},
  {word: 'Jack Nicholson', category: 'FAMOSO'},
  {word: 'Julia Roberts', category: 'FAMOSO'},
  {word: 'Chris Evans', category: 'FAMOSO'},
  {word: 'Hugh Jackman', category: 'FAMOSO'},
  {word: 'Chris Pratt', category: 'FAMOSO'},
  {word: 'Adam Sandler', category: 'FAMOSO'},
  {word: 'Kevin Hart', category: 'FAMOSO'},
  {word: 'Chris Rock', category: 'FAMOSO'},
  {word: 'Jackie Chan', category: 'FAMOSO'},
  {word: 'Keanu Reeves', category: 'FAMOSO'},
  {word: 'MrBeast', category: 'FAMOSO'},
  {word: 'PewDiePie', category: 'FAMOSO'},
  {word: 'ElRubius', category: 'FAMOSO'},
  {word: 'AuronPlay', category: 'FAMOSO'},
  {word: 'Ibai Llanos', category: 'FAMOSO'},
  {word: 'El Xokas', category: 'FAMOSO'},
  {word: 'TheGrefg', category: 'FAMOSO'},
  {word: 'Vegetta777', category: 'FAMOSO'},
  {word: 'Willyrex', category: 'FAMOSO'},
  {word: 'DjMaRiiO', category: 'FAMOSO'},
  {word: 'Luzu', category: 'FAMOSO'},
  {word: 'Alexby11', category: 'FAMOSO'},
  {word: 'Fernanfloo', category: 'FAMOSO'},
  {word: 'JuegaGerman', category: 'FAMOSO'},
  {word: 'Ninja', category: 'FAMOSO'},
  {word: 'Albert Einstein', category: 'FAMOSO'},
  {word: 'Isaac Newton', category: 'FAMOSO'},
  {word: 'Leonardo da Vinci', category: 'FAMOSO'},
  {word: 'Napole√≥n Bonaparte', category: 'FAMOSO'},
  {word: 'Julio C√©sar', category: 'FAMOSO'},
  {word: 'Cleopatra', category: 'FAMOSO'},
  {word: 'Abraham Lincoln', category: 'FAMOSO'},
  {word: 'Winston Churchill', category: 'FAMOSO'},
  {word: 'Mahatma Gandhi', category: 'FAMOSO'},
  {word: 'Nelson Mandela', category: 'FAMOSO'},
  {word: 'Martin Luther King', category: 'FAMOSO'},
  {word: 'Marie Curie', category: 'FAMOSO'},
  {word: 'Nikola Tesla', category: 'FAMOSO'},
  {word: 'Steve Jobs', category: 'FAMOSO'},
  {word: 'Bill Gates', category: 'FAMOSO'},
  {word: 'Pablo Picasso', category: 'FAMOSO'},
  {word: 'Vincent van Gogh', category: 'FAMOSO'},
  {word: 'Mozart', category: 'FAMOSO'},
  {word: 'Beethoven', category: 'FAMOSO'},
  {word: 'Shakespeare', category: 'FAMOSO'},
  {word: 'Cervantes', category: 'FAMOSO'},
  {word: 'Crist√≥bal Col√≥n', category: 'FAMOSO'},
  {word: 'Galileo Galilei', category: 'FAMOSO'},
  {word: 'Charles Darwin', category: 'FAMOSO'},
  {word: 'Adolf Hitler', category: 'FAMOSO'},
  {word: 'Donald Trump', category: 'FAMOSO'},
  {word: 'Barack Obama', category: 'FAMOSO'},
  {word: 'George Washington', category: 'FAMOSO'},
  {word: 'Javier Milei', category: 'FAMOSO'},
  {word: 'Madonna', category: 'FAMOSO'},
  {word: 'Marilyn Monroe', category: 'FAMOSO'},
  {word: 'Beyonc√©', category: 'FAMOSO'},
  {word: 'Adele', category: 'FAMOSO'},
  {word: 'Taylor Swift', category: 'FAMOSO'},
  {word: 'Elvis Presley', category: 'FAMOSO'},
  {word: 'The Beatles', category: 'FAMOSO'},
  {word: 'Rolling Stones', category: 'FAMOSO'},
  {word: 'Queen', category: 'FAMOSO'},
  {word: 'Michael Jackson', category: 'FAMOSO'},
  {word: 'Whitney Houston', category: 'FAMOSO'},
  {word: 'Shakira', category: 'FAMOSO'},
  {word: 'Rihanna', category: 'FAMOSO'},
  {word: 'Katy Perry', category: 'FAMOSO'},
  {word: 'Billie Eilish', category: 'FAMOSO'},
  {word: 'Drake', category: 'FAMOSO'},
  {word: 'Eminem', category: 'FAMOSO'},
  {word: 'Kanye West', category: 'FAMOSO'},
  {word: 'Ariana Grande', category: 'FAMOSO'},
  {word: 'Coldplay', category: 'FAMOSO'},
  {word: 'U2', category: 'FAMOSO'},
  {word: 'Metallica', category: 'FAMOSO'},
  {word: 'Bruno Mars', category: 'FAMOSO'},
  {word: 'Ed Sheeran', category: 'FAMOSO'},
  {word: 'Bad Bunny', category: 'FAMOSO'},
  {word: 'Ozuna', category: 'FAMOSO'},
  {word: 'J Balvin', category: 'FAMOSO'},
  {word: 'Karol G', category: 'FAMOSO'},
  {word: 'Daddy Yankee', category: 'FAMOSO'},
  {word: 'Luis Fonsi', category: 'FAMOSO'},
  {word: 'Maluma', category: 'FAMOSO'},
  {word: 'Anuel AA', category: 'FAMOSO'},
  {word: 'Bizarrap', category: 'FAMOSO'},
  {word: 'Sebasti√°n Yatra', category: 'FAMOSO'},
  {word: 'Julio Iglesias', category: 'FAMOSO'},
  {word: 'Enrique Iglesias', category: 'FAMOSO'},
  {word: 'Freddy Mercury', category: 'FAMOSO'},

  // PERSONAJE (FICTICIO)
  {word: 'Superman', category: 'PERSONAJE'},
  {word: 'Batman', category: 'PERSONAJE'},
  {word: 'Spider-Man', category: 'PERSONAJE'},
  {word: 'Iron Man', category: 'PERSONAJE'},
  {word: 'Hulk', category: 'PERSONAJE'},
  {word: 'Thor', category: 'PERSONAJE'},
  {word: 'Capit√°n Am√©rica', category: 'PERSONAJE'},
  {word: 'Wonder Woman', category: 'PERSONAJE'},
  {word: 'Flash', category: 'PERSONAJE'},
  {word: 'Aquaman', category: 'PERSONAJE'},
  {word: 'Deadpool', category: 'PERSONAJE'},
  {word: 'Wolverine', category: 'PERSONAJE'},
  {word: 'Black Widow', category: 'PERSONAJE'},
  {word: 'Doctor Strange', category: 'PERSONAJE'},
  {word: 'Thanos', category: 'PERSONAJE'},
  {word: 'Harley Quinn', category: 'PERSONAJE'},
  {word: 'Loki', category: 'PERSONAJE'},
  {word: 'Venom', category: 'PERSONAJE'},
  {word: 'Mario Bros', category: 'PERSONAJE'},
  {word: 'Luigi', category: 'PERSONAJE'},
  {word: 'Sonic', category: 'PERSONAJE'},
  {word: 'Pikachu', category: 'PERSONAJE'},
  {word: 'Mickey Mouse', category: 'PERSONAJE'},
  {word: 'Donald Duck', category: 'PERSONAJE'},
  {word: 'Goofy', category: 'PERSONAJE'},
  {word: 'Bob Esponja', category: 'PERSONAJE'},
  {word: 'Patrick Estrella', category: 'PERSONAJE'},
  {word: 'Don Cangrejo', category: 'PERSONAJE'},
  {word: 'Plankton', category: 'PERSONAJE'},
  {word: 'Calamardo', category: 'PERSONAJE'},
  {word: 'Gumball Watterson', category: 'PERSONAJE'},
  {word: 'Darwin Watterson', category: 'PERSONAJE'},
  {word: 'Richard Watterson', category: 'PERSONAJE'},
  {word: 'Bugs Bunny', category: 'PERSONAJE'},
  {word: 'Pato Lucas', category: 'PERSONAJE'},
  {word: 'Tom y Jerry', category: 'PERSONAJE'},
  {word: 'Scooby-Doo', category: 'PERSONAJE'},
  {word: 'Shaggy', category: 'PERSONAJE'},
  {word: 'Homer Simpson', category: 'PERSONAJE'},
  {word: 'Bart Simpson', category: 'PERSONAJE'},
  {word: 'Lisa Simpson', category: 'PERSONAJE'},
  {word: 'Marge Simpson', category: 'PERSONAJE'},
  {word: 'Peter Griffin', category: 'PERSONAJE'},
  {word: 'Stewie Griffin', category: 'PERSONAJE'},
  {word: 'Rick Sanchez', category: 'PERSONAJE'},
  {word: 'Morty Smith', category: 'PERSONAJE'},
  {word: 'Ash Ketchum', category: 'PERSONAJE'},
  {word: 'Goku', category: 'PERSONAJE'},
  {word: 'Vegeta', category: 'PERSONAJE'},
  {word: 'Naruto', category: 'PERSONAJE'},
  {word: 'Luffy', category: 'PERSONAJE'},
  {word: 'Hermione Granger', category: 'PERSONAJE'},
  {word: 'Ron Weasley', category: 'PERSONAJE'},
  {word: 'Dumbledore', category: 'PERSONAJE'},
  {word: 'Voldemort', category: 'PERSONAJE'},
  {word: 'Gandalf', category: 'PERSONAJE'},
  {word: 'Frodo Bols√≥n', category: 'PERSONAJE'},
  {word: 'Aragorn', category: 'PERSONAJE'},
  {word: 'Legolas', category: 'PERSONAJE'},
  {word: 'Jon Nieve', category: 'PERSONAJE'},
  {word: 'Daenerys Targaryen', category: 'PERSONAJE'},
  {word: 'Tyrion Lannister', category: 'PERSONAJE'},
  {word: 'Eleven', category: 'PERSONAJE'},
  {word: 'Mike Wheeler', category: 'PERSONAJE'},
  {word: 'Dustin Henderson', category: 'PERSONAJE'},
  {word: 'Neo Matrix', category: 'PERSONAJE'},
  {word: 'Rey', category: 'PERSONAJE'},
  {word: 'Kylo Ren', category: 'PERSONAJE'},
  {word: 'Luke Skywalker', category: 'PERSONAJE'},
  {word: 'Leia Organa', category: 'PERSONAJE'},
  {word: 'Han Solo', category: 'PERSONAJE'},
  {word: 'Obi-Wan Kenobi', category: 'PERSONAJE'},
  {word: 'Yoda', category: 'PERSONAJE'},
  {word: 'Sauron', category: 'PERSONAJE'},
  {word: 'Severus Snape', category: 'PERSONAJE'},
  {word: 'Draco Malfoy', category: 'PERSONAJE'},
  {word: 'Sirius Black', category: 'PERSONAJE'},
  {word: 'Cersei Lannister', category: 'PERSONAJE'},
  {word: 'Sansa Stark', category: 'PERSONAJE'},
  {word: 'Ned Stark', category: 'PERSONAJE'},
  {word: 'Jaime Lannister', category: 'PERSONAJE'},
  {word: 'Captain Hook', category: 'PERSONAJE'},
  {word: 'Peter Pan', category: 'PERSONAJE'},
  {word: 'Mulan', category: 'PERSONAJE'},
  {word: 'Pocahontas', category: 'PERSONAJE'},
  {word: 'Hercules', category: 'PERSONAJE'},
  {word: 'Moana', category: 'PERSONAJE'},
  {word: 'WALL-E', category: 'PERSONAJE'},
  {word: 'Mal√©fica', category: 'PERSONAJE'},
  {word: 'Grogu', category: 'PERSONAJE'},
  {word: 'Steve Harrington', category: 'PERSONAJE'},
  {word: 'Jim Hopper', category: 'PERSONAJE'},
  {word: 'Eleven', category: 'PERSONAJE'},
  {word: 'Tony Soprano', category: 'PERSONAJE'},
  {word: 'Walter White', category: 'PERSONAJE'},
  {word: 'Jesse Pinkman', category: 'PERSONAJE'},
  {word: 'Gustavo Fring', category: 'PERSONAJE'},
  {word: 'Hector Salamanca', category: 'PERSONAJE'},
  {word: 'Tuco Salamanca', category: 'PERSONAJE'},
  {word: 'Saul Goodman', category: 'PERSONAJE'},
  {word: 'Sherlock Holmes', category: 'PERSONAJE'},
  {word: 'Elsa', category: 'PERSONAJE'},
  {word: 'Anna', category: 'PERSONAJE'},
  {word: 'Olaf', category: 'PERSONAJE'},
  {word: 'Woody', category: 'PERSONAJE'},
  {word: 'Buzz Lightyear', category: 'PERSONAJE'},
  {word: 'Nemo', category: 'PERSONAJE'},
  {word: 'Dory', category: 'PERSONAJE'},
  {word: 'Shrek', category: 'PERSONAJE'},
  {word: 'Burro', category: 'PERSONAJE'},
  {word: 'Simba', category: 'PERSONAJE'},
  {word: 'Mufasa', category: 'PERSONAJE'},
  {word: 'Aladino', category: 'PERSONAJE'},
  {word: 'Genio', category: 'PERSONAJE'},
  {word: 'La bella y la bestia', category: 'PERSONAJE'},
  {word: 'Ariel', category: 'PERSONAJE'},
  {word: 'Cenicienta', category: 'PERSONAJE'},
  {word: 'Blancanieves', category: 'PERSONAJE'},
  {word: 'James Bond', category: 'PERSONAJE'},
  {word: 'Indiana Jones', category: 'PERSONAJE'},
  {word: 'Jack Sparrow', category: 'PERSONAJE'},
  {word: 'Invencible', category: 'PERSONAJE'},
  {word: 'Michael Myers', category: 'PERSONAJE'},
  {word: 'Freddy Krueger', category: 'PERSONAJE'},
  {word: 'Jason Voorhees', category: 'PERSONAJE'},
  {word: 'Jigsaw', category: 'PERSONAJE'},
  {word: 'Chucky', category: 'PERSONAJE'},
  {word: 'Darth Vader', category: 'PERSONAJE'},
  {word: 'Duende Verde', category: 'PERSONAJE'},
  {word: 'Anabelle', category: 'PERSONAJE'},
  {word: 'Godzilla', category: 'PERSONAJE'},
  {word: 'R2-D2', category: 'PERSONAJE'},
  {word: 'C-3PO', category: 'PERSONAJE'},
  {word: 'E.T.', category: 'PERSONAJE'},
  {word: 'Super Mario', category: 'PERSONAJE'},
  {word: 'Sonic', category: 'PERSONAJE'},
  {word: 'Franklin Clinton', category: 'PERSONAJE'},
  {word: 'Trevor Philips', category: 'PERSONAJE'},
  {word: 'Michael De Santa', category: 'PERSONAJE'},
  {word: 'Mortadelo', category: 'PERSONAJE'},
  {word: 'Filem√≥n', category: 'PERSONAJE'},
  {word: 'Tint√≠n', category: 'PERSONAJE'},
  {word: 'Popeye', category: 'PERSONAJE'},

  // CINE
  {word: 'Titanic', category: 'CINE'},
  {word: 'Avatar', category: 'CINE'},
  {word: 'Avengers', category: 'CINE'},
  {word: 'Star Wars', category: 'CINE'},
  {word: 'Harry Potter', category: 'CINE'},
  {word: 'El Padrino', category: 'CINE'},
  {word: 'Pulp Fiction', category: 'CINE'},
  {word: 'Los Goonies', category: 'CINE'},
  {word: 'Forrest Gump', category: 'CINE'},
  {word: 'Matrix', category: 'CINE'},
  {word: 'Gladiador', category: 'CINE'},
  {word: 'Inception', category: 'CINE'},
  {word: 'Interstellar', category: 'CINE'},
  {word: 'Breaking Bad', category: 'CINE'},
  {word: 'Game of Thrones', category: 'CINE'},
  {word: 'Stranger Things', category: 'CINE'},
  {word: 'La Casa de Papel', category: 'CINE'},
  {word: 'Friends', category: 'CINE'},
  {word: 'The Office', category: 'CINE'},
  {word: 'Narcos', category: 'CINE'},
  {word: 'Black Mirror', category: 'CINE'},
  {word: 'Squid Game', category: 'CINE'},
  {word: 'Wednesday', category: 'CINE'},
  {word: 'The Crown', category: 'CINE'},
  {word: 'Peaky Blinders', category: 'CINE'},
  {word: 'The Mandalorian', category: 'CINE'},
  {word: 'Better Call Saul', category: 'CINE'},
  {word: 'Cobra Kai', category: 'CINE'},
  {word: 'The Walking Dead', category: 'CINE'},
  {word: 'IT', category: 'CINE'},
  {word: 'El Se√±or de los Anillos', category: 'CINE'},
  {word: 'Los Soprano', category: 'CINE'},
  {word: 'El resplandor', category: 'CINE'},
  {word: 'Alien', category: 'CINE'},
  {word: 'Terminator', category: 'CINE'},
  {word: 'El silencio de los corderos', category: 'CINE'},
  {word: 'Jurassic Park', category: 'CINE'},
  {word: 'La vida es bella', category: 'CINE'},
  {word: 'La lista de Schindler', category: 'CINE'},
  {word: '1917', category: 'CINE'},
  {word: 'Joker', category: 'CINE'},
  {word: 'La La Land', category: 'CINE'},
  {word: 'Toy Story', category: 'CINE'},
  {word: 'Coco', category: 'CINE'},
  {word: 'Up', category: 'CINE'},
  {word: 'Django desencadenado', category: 'CINE'},
  {word: 'Kill Bill', category: 'CINE'},
  {word: 'El club de la Lucha', category: 'CINE'},
  {word: 'Memento', category: 'CINE'},
  {word: 'La Pasi√≥n de Cristo', category: 'CINE'},
  {word: 'El renacido', category: 'CINE'},
  {word: 'El √∫ltimo mohicano', category: 'CINE'},
  {word: 'Braveheart', category: 'CINE'},
  {word: 'Westworld', category: 'CINE'},
  {word: 'Dexter', category: 'CINE'},
  {word: 'Lost', category: 'CINE'},
  {word: 'Sherlock', category: 'CINE'},
  {word: 'True Detective', category: 'CINE'},
  {word: 'Chern√≥bil', category: 'CINE'},
  {word: 'The Wire', category: 'CINE'},
  {word: 'Black Panther', category: 'CINE'},
  {word: 'Guardianes de la Galaxia', category: 'CINE'},
  {word: 'Casablanca', category: 'CINE'},
  {word: 'Los Juegos del Hambre', category: 'CINE'},
  {word: 'El corredor del Laberinto', category: 'CINE'},
  {word: 'Crep√∫sculo', category: 'CINE'},
  {word: 'Piratas del Caribe', category: 'CINE'},
  {word: 'Misi√≥n Imposible', category: 'CINE'},
  {word: 'John Wick', category: 'CINE'},
  {word: 'Deadpool', category: 'CINE'},
  {word: 'El indomable Will Hunting', category: 'CINE'},
  {word: 'Big Bang Theory', category: 'CINE'},

  // MARCA
  {word: 'iPhone', category: 'MARCA'},
  {word: 'Samsung', category: 'MARCA'},
  {word: 'PlayStation', category: 'MARCA'},
  {word: 'Xbox', category: 'MARCA'},
  {word: 'Nintendo', category: 'MARCA'},
  {word: 'Tesla', category: 'MARCA'},
  {word: 'Ferrari', category: 'MARCA'},
  {word: 'Lamborghini', category: 'MARCA'},
  {word: 'Porsche', category: 'MARCA'},
  {word: 'Mercedes', category: 'MARCA'},
  {word: 'BMW', category: 'MARCA'},
  {word: 'Audi', category: 'MARCA'},
  {word: 'Coca-Cola', category: 'MARCA'},
  {word: 'Pepsi', category: 'MARCA'},
  {word: 'McDonald\'s', category: 'MARCA'},
  {word: 'Starbucks', category: 'MARCA'},
  {word: 'Amazon', category: 'MARCA'},
  {word: 'Google', category: 'MARCA'},
  {word: 'Facebook', category: 'MARCA'},
  {word: 'Instagram', category: 'MARCA'},
  {word: 'Twitter', category: 'MARCA'},
  {word: 'TikTok', category: 'MARCA'},
  {word: 'YouTube', category: 'MARCA'},
  {word: 'Netflix', category: 'MARCA'},
  {word: 'Spotify', category: 'MARCA'},
  {word: 'Apple', category: 'MARCA'},
  {word: 'Microsoft', category: 'MARCA'},
  {word: 'Nike', category: 'MARCA'},
  {word: 'Adidas', category: 'MARCA'},
  {word: 'IKEA', category: 'MARCA'},
  {word: 'LEGO', category: 'MARCA'},
  {word: 'Google Maps', category: 'MARCA'},

  // DEPORTE
  {word: 'f√∫tbol', category: 'DEPORTE'},
  {word: 'baloncesto', category: 'DEPORTE'},
  {word: 'tenis', category: 'DEPORTE'},
  {word: 'nataci√≥n', category: 'DEPORTE'},
  {word: 'ciclismo', category: 'DEPORTE'},
  {word: 'atletismo', category: 'DEPORTE'},
  {word: 'boxeo', category: 'DEPORTE'},
  {word: 'gimnasia', category: 'DEPORTE'},
  {word: 'voleibol', category: 'DEPORTE'},
  {word: 'rugby', category: 'DEPORTE'},
  {word: 'hockey', category: 'DEPORTE'},
  {word: 'b√©isbol', category: 'DEPORTE'},
  {word: 'golf', category: 'DEPORTE'},
  {word: 'esqu√≠', category: 'DEPORTE'},
  {word: 'surf', category: 'DEPORTE'},
  {word: 'escalada', category: 'DEPORTE'},
  {word: 'yoga', category: 'DEPORTE'},
  {word: 'baile', category: 'DEPORTE'},
  {word: 'karate', category: 'DEPORTE'},
  {word: 'judo', category: 'DEPORTE'},
  {word: 'esgrima', category: 'DEPORTE'},
  {word: 'FC Barcelona', category: 'DEPORTE'},
  {word: 'Real Madrid', category: 'DEPORTE'},
  {word: 'Manchester United', category: 'DEPORTE'},
  {word: 'Liverpool', category: 'DEPORTE'},
  {word: 'Bayern Munich', category: 'DEPORTE'},
  {word: 'Juventus', category: 'DEPORTE'},
  {word: 'PSG', category: 'DEPORTE'},

  // ANIMAL
  {word: 'perro', category: 'ANIMAL'},
  {word: 'elefante', category: 'ANIMAL'},
  {word: 'le√≥n', category: 'ANIMAL'},
  {word: 'tigre', category: 'ANIMAL'},
  {word: 'oso', category: 'ANIMAL'},
  {word: 'mono', category: 'ANIMAL'},
  {word: 'jirafa', category: 'ANIMAL'},
  {word: 'cebra', category: 'ANIMAL'},
  {word: 'hipop√≥tamo', category: 'ANIMAL'},
  {word: 'rinoceronte', category: 'ANIMAL'},
  {word: 'cocodrilo', category: 'ANIMAL'},
  {word: 'serpiente', category: 'ANIMAL'},
  {word: '√°guila', category: 'ANIMAL'},
  {word: 'b√∫ho', category: 'ANIMAL'},
  {word: 'pato', category: 'ANIMAL'},
  {word: 'cisne', category: 'ANIMAL'},
  {word: 'delf√≠n', category: 'ANIMAL'},
  {word: 'ballena', category: 'ANIMAL'},
  {word: 'tibur√≥n', category: 'ANIMAL'},
  {word: 'pulpo', category: 'ANIMAL'},
  {word: 'ping√ºino', category: 'ANIMAL'},
  {word: 'koala', category: 'ANIMAL'},
  {word: 'canguro', category: 'ANIMAL'},
  {word: 'panda', category: 'ANIMAL'},
  {word: 'tortuga', category: 'ANIMAL'},
  {word: 'conejo', category: 'ANIMAL'},
  {word: 'rat√≥n', category: 'ANIMAL'},
  {word: 'ardilla', category: 'ANIMAL'},
  {word: 'zorro', category: 'ANIMAL'},
  {word: 'ciervo', category: 'ANIMAL'},
  {word: 'caballo', category: 'ANIMAL'},
  {word: 'vaca', category: 'ANIMAL'},
  {word: 'cerdo', category: 'ANIMAL'},
  {word: 'oveja', category: 'ANIMAL'},
  {word: 'gallina', category: 'ANIMAL'},
  {word: 'pavo', category: 'ANIMAL'},
  {word: 'gato', category: 'ANIMAL'},
  {word: 'lobo', category: 'ANIMAL'},
  {word: 'leopardo', category: 'ANIMAL'},
  {word: 'macaco', category: 'ANIMAL'},
  {word: 'loro', category: 'ANIMAL'},
  {word: 'orca', category: 'ANIMAL'},
  {word: 'mosquito', category: 'ANIMAL'},
  {word: 'mosca', category: 'ANIMAL'},
  {word: 'escorpi√≥n', category: 'ANIMAL'},
  {word: 'oso polar', category: 'ANIMAL'},
  {word: 'halc√≥n', category: 'ANIMAL'},
  {word: 'liebre', category: 'ANIMAL'},
  {word: 'cienpi√©s', category: 'ANIMAL'},
  {word: 'dinosaurio', category: 'ANIMAL'},
  {word: 'ara√±a', category: 'ANIMAL'},
  {word: 'tar√°ntula', category: 'ANIMAL'},
  {word: 'abeja', category: 'ANIMAL'},
  {word: 'avispa', category: 'ANIMAL'},
  {word: 'mofeta', category: 'ANIMAL'},
  {word: 'cangrejo', category: 'ANIMAL'},
  {word: 'estrella de mar', category: 'ANIMAL'},
  {word: 'foca', category: 'ANIMAL'},
  {word: 'puma', category: 'ANIMAL'},
  {word: 'avestruz', category: 'ANIMAL'},
  {word: 'jabal√≠', category: 'ANIMAL'},
  {word: 'ornitorrinco', category: 'ANIMAL'},
  {word: 'pegaso', category: 'ANIMAL'},
  {word: 'unicornio', category: 'ANIMAL'},
  {word: 'minotauro', category: 'ANIMAL'},
  {word: 'mammut', category: 'ANIMAL'},

  // OFICIO
  {word: 'm√©dico', category: 'OFICIO'},
  {word: 'profesor', category: 'OFICIO'},
  {word: 'ingeniero', category: 'OFICIO'},
  {word: 'arquitecto', category: 'OFICIO'},
  {word: 'abogado', category: 'OFICIO'},
  {word: 'polic√≠a', category: 'OFICIO'},
  {word: 'bombero', category: 'OFICIO'},
  {word: 'cocinero', category: 'OFICIO'},
  {word: 'camarero', category: 'OFICIO'},
  {word: 'panadero', category: 'OFICIO'},
  {word: 'carpintero', category: 'OFICIO'},
  {word: 'electricista', category: 'OFICIO'},
  {word: 'fontanero', category: 'OFICIO'},
  {word: 'mec√°nico', category: 'OFICIO'},
  {word: 'piloto', category: 'OFICIO'},
  {word: 'conductor', category: 'OFICIO'},
  {word: 'taxista', category: 'OFICIO'},
  {word: 'cartero', category: 'OFICIO'},
  {word: 'jardinero', category: 'OFICIO'},
  {word: 'pintor', category: 'OFICIO'},
  {word: 'm√∫sico', category: 'OFICIO'},
  {word: 'cantante', category: 'OFICIO'},
  {word: 'bailar√≠n', category: 'OFICIO'},
  {word: 'actor', category: 'OFICIO'},
  {word: 'director', category: 'OFICIO'},
  {word: 'fot√≥grafo', category: 'OFICIO'},
  {word: 'periodista', category: 'OFICIO'},
  {word: 'escritor', category: 'OFICIO'},
  {word: 'cient√≠fico', category: 'OFICIO'},
  {word: 'astronauta', category: 'OFICIO'},
  {word: 'soldado', category: 'OFICIO'},
  {word: 'enfermero', category: 'OFICIO'},
  {word: 'veterinario', category: 'OFICIO'},
  {word: 'dentista', category: 'OFICIO'},
  {word: 'farmac√©utico', category: 'OFICIO'},
  {word: 'programador', category: 'OFICIO'},
  {word: 'dise√±ador', category: 'OFICIO'},

  // LUGARES
  {word: 'Espa√±a', category: 'LUGAR'},
  {word: 'Francia', category: 'LUGAR'},
  {word: 'Italia', category: 'LUGAR'},
  {word: 'Alemania', category: 'LUGAR'},
  {word: 'Inglaterra', category: 'LUGAR'},
  {word: 'Portugal', category: 'LUGAR'},
  {word: 'Brasil', category: 'LUGAR'},
  {word: 'Argentina', category: 'LUGAR'},
  {word: 'M√©xico', category: 'LUGAR'},
  {word: 'Colombia', category: 'LUGAR'},
  {word: 'Per√∫', category: 'LUGAR'},
  {word: 'Chile', category: 'LUGAR'},
  {word: 'Venezuela', category: 'LUGAR'},
  {word: 'Uruguay', category: 'LUGAR'},
  {word: 'Ecuador', category: 'LUGAR'},
  {word: 'Cuba', category: 'LUGAR'},
  {word: 'Jap√≥n', category: 'LUGAR'},
  {word: 'China', category: 'LUGAR'},
  {word: 'Corea', category: 'LUGAR'},
  {word: 'India', category: 'LUGAR'},
  {word: 'Australia', category: 'LUGAR'},
  {word: 'Canad√°', category: 'LUGAR'},
  {word: 'Estados Unidos', category: 'LUGAR'},
  {word: 'Rusia', category: 'LUGAR'},
  {word: 'Egipto', category: 'LUGAR'},
  {word: 'Marruecos', category: 'LUGAR'},
  {word: 'Grecia', category: 'LUGAR'},
  {word: 'Turqu√≠a', category: 'LUGAR'},
  {word: 'Tailandia', category: 'LUGAR'},
  {word: 'Vietnam', category: 'LUGAR'},
  {word: 'Noruega', category: 'LUGAR'},
  {word: 'Suecia', category: 'LUGAR'},
  {word: 'Dinamarca', category: 'LUGAR'},
  {word: 'Holanda', category: 'LUGAR'},
  {word: 'B√©lgica', category: 'LUGAR'},
  {word: 'Suiza', category: 'LUGAR'},
  {word: 'Austria', category: 'LUGAR'},
  {word: 'Polonia', category: 'LUGAR'},
  {word: 'Irlanda', category: 'LUGAR'},
  {word: 'Escocia', category: 'LUGAR'},
  {word: 'Par√≠s', category: 'LUGAR'},
  {word: 'Londres', category: 'LUGAR'},
  {word: 'Nueva York', category: 'LUGAR'},
  {word: 'Tokio', category: 'LUGAR'},
  {word: 'Roma', category: 'LUGAR'},
  {word: 'Barcelona', category: 'LUGAR'},
  {word: 'Mosc√∫', category: 'LUGAR'},
  {word: 'Berl√≠n', category: 'LUGAR'},
  {word: 'S√≠dney', category: 'LUGAR'},
  {word: 'Los √Ångeles', category: 'LUGAR'},
  {word: 'Madrid', category: 'LUGAR'},
  {word: 'Machu Picchu', category: 'LUGAR'},
  {word: 'Taj Mahal', category: 'LUGAR'},
  {word: 'Gran Ca√±√≥n', category: 'LUGAR'},
  {word: 'Monte Everest', category: 'LUGAR'},
  {word: 'Torre Eiffel', category: 'LUGAR'},
  {word: 'Estatua de la Libertad', category: 'LUGAR'},
  {word: 'Gran Muralla', category: 'LUGAR'},
  {word: 'Sagrada Familia', category: 'LUGAR'},
  {word: 'Marte', category: 'LUGAR'},
  {word: 'J√∫piter', category: 'LUGAR'},
  {word: 'Saturno', category: 'LUGAR'},
  {word: 'Mercurio', category: 'LUGAR'},
  {word: 'Venus', category: 'LUGAR'},
  {word: 'Urano', category: 'LUGAR'},
  {word: 'Neptuno', category: 'LUGAR'},
  {word: 'Plut√≥n', category: 'LUGAR'},
  {word: 'Sol', category: 'LUGAR'},
  {word: 'Luna', category: 'LUGAR'},
  {word: 'V√≠a L√°ctea', category: 'LUGAR'}
];

const defaultWords = classifiedWords.map(entry => entry.word);


    let players = []; // {id, name, role: 'impostor'|'civil', word, eliminated: boolean}
    let numPlayers = 4;
    let numImpostors = 1;
    let savedPlayerNames = [];
    let clueModeEnabled = false;
    let currentWordCategory = '';
    let selectedCategoryFilter = null;
    const categoryOptions = [
      { label: 'famoso', key: 'FAMOSO', icon: 'üåü' },
      { label: 'personaje', key: 'PERSONAJE', icon: 'ü¶∏' },
      { label: 'lugar', key: 'LUGAR', icon: 'üåç' },
      { label: 'cine', key: 'CINE', icon: 'üçø' },
      { label: 'objeto', key: 'OBJETO', icon: 'üì¶' },
      { label: 'animal', key: 'ANIMAL', icon: 'ü¶Å' }
    ];

    // Phase trackers
    let revealIndex = 0; // player currently checking role

    function randInt(max){return Math.floor(Math.random()*max)}

    // Calculate max impostors based on number of players
    function getMaxImpostors(numPlayers) {
      if(numPlayers <= 4) return 1;
      if(numPlayers <= 6) return 2;
      if(numPlayers === 7) return 3;
      if(numPlayers === 8) return 4;
      return 5; // for 9-10 players
    }

    // Sound effects
    let audioContext = null;

    function initAudioContext() {
      if (!audioContext) {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
      }
      // Resume context if suspended (iOS requirement)
      if (audioContext.state === 'suspended') {
        audioContext.resume();
      }
      return audioContext;
    }

    function playSound(frequency, duration, volume = 0.3) {
      try {
        const ctx = initAudioContext();
        const oscillator = ctx.createOscillator();
        const gainNode = ctx.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(ctx.destination);
        
        oscillator.frequency.value = frequency;
        oscillator.type = 'sine';
        
        gainNode.gain.setValueAtTime(volume, ctx.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + duration);
        
        oscillator.start(ctx.currentTime);
        oscillator.stop(ctx.currentTime + duration);
      } catch (err) {
        console.log('Audio error:', err);
      }
    }

    function playPopSound() {
      playSound(800, 0.1, 0.2);
    }

    function playSuccessSound() {
      playSound(600, 0.08, 0.15);
      setTimeout(() => playSound(800, 0.08, 0.15), 50);
      setTimeout(() => playSound(1000, 0.1, 0.2), 100);
    }

    function playClickSound() {
      playSound(400, 0.05, 0.15);
    }

    function playStartGameSound() {
      playSound(500, 0.1, 0.2);
      setTimeout(() => playSound(700, 0.1, 0.2), 80);
      setTimeout(() => playSound(900, 0.1, 0.22), 160);
      setTimeout(() => playSound(1200, 0.15, 0.25), 240);
    }

    // Counter controls
    decPlayers.addEventListener('click', () => {
      if(numPlayers > 3) {
        playClickSound();
        numPlayers--;
        playersDisplay.textContent = numPlayers;
        const maxImpostors = getMaxImpostors(numPlayers);
        if(numImpostors > maxImpostors) {
          numImpostors = maxImpostors;
          impostorsDisplay.textContent = numImpostors;
        }
      }
    });

    incPlayers.addEventListener('click', () => {
      if(numPlayers < 10) {
        playPopSound();
        numPlayers++;
        playersDisplay.textContent = numPlayers;
      }
    });

    decImpostors.addEventListener('click', () => {
      if(numImpostors > 1) {
        playClickSound();
        numImpostors--;
        impostorsDisplay.textContent = numImpostors;
      }
    });

    incImpostors.addEventListener('click', () => {
      const maxImpostors = getMaxImpostors(numPlayers);
      if(numImpostors < maxImpostors) {
        playPopSound();
        numImpostors++;
        impostorsDisplay.textContent = numImpostors;
      }
    });

    function handleModeSelection(enableHints){
      clueModeEnabled = enableHints;
      selectedCategoryFilter = null;
      playSuccessSound();
      showNamesScreen();
    }

    function showCategorySelection(){
      playSuccessSound();
      clueModeEnabled = false;
      selectedCategoryFilter = null;
      setup.style.display = 'none';
      namesSection.style.display = 'none';
      pass.style.display = 'none';
      discussion.style.display = 'none';
      results.style.display = 'none';
      categorySelection.style.display = 'block';
      buildCategoryButtons();
    }

    function buildCategoryButtons(){
      categoryButtons.innerHTML = '';
      categoryOptions.forEach(option=>{
        const btn = document.createElement('button');
        btn.className = 'btn category-btn';
        btn.textContent = `${option.label} ${option.icon}`;
        btn.addEventListener('click', ()=>handleCategoryPick(option));
        categoryButtons.appendChild(btn);
      });
    }

    function handleCategoryPick(option){
      playSuccessSound();
      selectedCategoryFilter = option.key;
      showNamesScreen();
    }

    function showNamesScreen(){
      categorySelection.style.display = 'none';
      // Build initial players
      players = [];
      for(let i=0;i<numPlayers;i++){
        players.push({id:i, name:`Jugador ${i+1}`, role:'civil', word:null});
      }

      // Build names inputs
      namesList.innerHTML = '';
      
      players.forEach((p, idx) => {
        const wrapper = document.createElement('div');
        wrapper.className = 'name-input-wrapper';
        wrapper.style.animation = `slideIn 0.3s ease-out ${idx * 0.05}s forwards`;
        wrapper.style.opacity = '0';
        
        const input = document.createElement('input');
        input.type = 'text';
        input.placeholder = `Jugador ${idx+1}`;
        input.value = savedPlayerNames[idx] || '';
        input.dataset.playerId = p.id;
        // aplicar estilo de juego
        input.className = 'name-input';
        
        wrapper.appendChild(input);
        namesList.appendChild(wrapper);
      });

      setup.style.display = 'none';
      namesSection.style.display = 'block';
    }

    function startGame(){
      // Update player names from inputs and save them
      savedPlayerNames = [];
      Array.from(namesList.children).forEach(wrapper => {
        const input = wrapper.querySelector('input');
        const id = parseInt(input.dataset.playerId);
        const name = input.value.trim() || `Jugador ${id+1}`;
        players[id].name = name;
        players[id].eliminated = false;
        savedPlayerNames[id] = input.value.trim();
      });

      // Assign impostors
      let available = [...Array(numPlayers).keys()];
      for(let k=0;k<numImpostors;k++){
        const pickIdx = randInt(available.length);
        const pidx = available.splice(pickIdx,1)[0];
        players[pidx].role = 'impostor';
      }

      // Assign words
      const wordPoolSource = selectedCategoryFilter
        ? classifiedWords.filter(entry => entry.category === selectedCategoryFilter)
        : classifiedWords;
      const wordPool = wordPoolSource.length ? wordPoolSource : classifiedWords;
      const wordEntry = wordPool[randInt(wordPool.length)];
      const word = wordEntry.word;
      currentWordCategory = wordEntry.category;
      players.forEach(p=>{
        if(p.role === 'civil') p.word = word;
        else p.word = null;
      });

      // ready to pass
      namesSection.style.display = 'none';
      pass.style.display = 'block';
      discussion.style.display = 'none';
      results.style.display = 'none';

      revealIndex = 0;
      roleArea.style.display = 'none';
      nextBtn.style.display = 'none';
      updatePlayerIndicator();

      // Update reveal button text
      revealBtn.disabled = false;
      revealBtn.textContent = 'Ver mi rol';
    }

    function updatePlayerIndicator(){
      const currentPlayer = players[revealIndex];
      const isDefaultName = currentPlayer.name === `Jugador ${currentPlayer.id + 1}`;
      
      if(isDefaultName) {
        playerIndicator.textContent = `Jugador ${revealIndex + 1}`;
        playerNumber.textContent = `de ${numPlayers} jugadores`;
      } else {
        playerIndicator.textContent = currentPlayer.name;
        playerNumber.textContent = `Jugador ${revealIndex + 1} de ${numPlayers}`;
      }
    }

    function showRoleFor(index){
      const p = players[index];
      roleArea.innerHTML = '';
      roleArea.style.display = 'flex';

      if(p.role === 'impostor'){
        const b = document.createElement('div'); 
        b.className='impostor-badge'; 
        b.textContent='ü§´üî•¬°Eres el IMPOSTOR!üî•ü§´';
        b.style.marginTop = '-40px';
        roleArea.appendChild(b);
        
        const hint = document.createElement('div'); 
        hint.className='muted'; 
        hint.style.marginTop='4px'; 
        hint.textContent='Pasa desapercibido entre los civiles.'; 
        roleArea.appendChild(hint);

        if(clueModeEnabled && currentWordCategory){
          const clue = document.createElement('div');
          clue.className='impostor-clue';
          clue.innerHTML = `
            <span class="impostor-clue-label">La pista es:</span>
            <span class="impostor-clue-word">${currentWordCategory}</span>
          `;
          roleArea.appendChild(clue);
        }
      } else {
        const b = document.createElement('div'); 
        b.className='civil-badge'; 
        b.textContent='‚úÖ Eres CIVIL ‚úÖ';
        roleArea.appendChild(b);
        
        const t = document.createElement('div'); 
        t.className='muted'; 
        t.style.fontSize='16px';
        t.style.marginTop='12px';
        t.textContent='La palabra es:'; 
        roleArea.appendChild(t);
        
        const w = document.createElement('div'); 
        w.className='word'; 
        w.textContent = p.word; 
        roleArea.appendChild(w);
      }

      nextBtn.style.display = 'inline-block';
      revealBtn.style.display = 'none';
      
      // Update button text based on if it's the last player
      if(revealIndex === players.length - 1) {
        nextBtn.textContent = '¬°Que empiece la partida!';
      } else {
        nextBtn.textContent = 'Siguiente';
      }
    }

    function showCountdown() {
      // Create countdown overlay with both: fullscreen black bg + centered in container
      const countdownScreen = document.createElement('div');
      countdownScreen.className = 'countdown-screen';
      document.body.appendChild(countdownScreen);
      
      // Create inner content container
      const innerContent = document.createElement('div');
      innerContent.style.cssText = 'position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);max-width:550px;width:90%;text-align:center;';
      countdownScreen.appendChild(innerContent);

      let count = 3;
      
      function displayNumber() {
        innerContent.innerHTML = `<div class="countdown-number">${count}</div>`;
        
        // Play sound based on count
        if(count === 3) playSound(600, 0.15, 0.25);
        else if(count === 2) playSound(750, 0.15, 0.25);
        else if(count === 1) playSound(900, 0.15, 0.25);
        
        count--;
        
        if(count >= 1) {
          setTimeout(displayNumber, 1000);
        } else {
          setTimeout(() => {
            innerContent.innerHTML = `<div class="countdown-number" style="font-size:50px;color:#ff3b3b">¬°A VOTAR!</div>`;
            playSound(1200, 0.3, 0.3);
            setTimeout(() => playSound(1400, 0.2, 0.25), 150);
            
            setTimeout(() => {
              countdownScreen.remove();
              discussion.style.display = 'block';
              
              // Choose random player to start talking
              const activePlayers = players.filter(p => !p.eliminated);
              const firstSpeaker = activePlayers[randInt(activePlayers.length)];
              const firstSpeakerElement = document.getElementById('firstSpeakerName');
              firstSpeakerElement.innerHTML = `üé§ Empieza hablando: <span style="font-size:28px;color:#ffffff;text-shadow:0 4px 14px rgba(255,255,255,0.8)">${firstSpeaker.name}</span>`;
              firstSpeakerElement.style.display = 'block';
              
              buildDiscussionVoteList();
            }, 1500);
          }, 1000);
        }
      }
      
      displayNumber();
    }

    function buildDiscussionVoteList(){
      discussionVoteList.innerHTML = '';
      players.filter(p => !p.eliminated).forEach(p=>{
        const el = document.createElement('div');
        el.className='player-pill';
        el.dataset.id = p.id;
        el.textContent = p.name;
        el.addEventListener('click', ()=>{
          playPopSound();
          // toggle selection
          if(el.classList.contains('selected')) el.classList.remove('selected');
          else el.classList.add('selected');
          // only one selected at a time
          Array.from(discussionVoteList.children).forEach(ch=>{ if(ch !== el) ch.classList.remove('selected') });
        });
        discussionVoteList.appendChild(el);
      });
    }

    submitGroupVoteBtn.addEventListener('click', ()=>{
      const sel = Array.from(discussionVoteList.children).find(c=>c.classList.contains('selected'));
      if(!sel){
        alert('Selecciona a alguien para expulsar.');
        return;
      }
      playSuccessSound();
      const votedId = parseInt(sel.dataset.id);
      showResults(votedId);
    });

    function showResults(executedId){
      const executedPlayer = players.find(p=>p.id===executedId);
      const isImpostor = executedPlayer.role === 'impostor';
      
      executedPlayer.eliminated = true;
      
      // Count remaining impostors
      const remainingImpostors = players.filter(p => p.role === 'impostor' && !p.eliminated).length;
      const totalImpostors = players.filter(p => p.role === 'impostor').length;
      
      // Get the word that was used
      const gameWord = players.find(p => p.role === 'civil')?.word || '';
      
      discussion.style.display = 'none';
      results.style.display = 'block';
      
      if(isImpostor) {
        if(remainingImpostors === 0) {
          // All impostors eliminated - Civilians win
          const impostorText = totalImpostors === 1 ? 'el impostor' : 'el √∫ltimo impostor';
          resultText.innerHTML = `<div style="font-size:24px;font-family:'Fredoka One',cursive;color:#4fd1c5">üéâ ¬°Los CIVILES ganan! üéâ</div>` +
            `<div style="margin-top:8px" class="muted">Hab√©is expulsado a <strong>${executedPlayer.name}</strong>, ${impostorText}.</div>` +
            `<div style="margin-top:16px;font-size:18px;color:#d0d3e1">La palabra era: <span style="font-size:32px;color:#4fd1c5;font-family:'Fredoka One',cursive;text-shadow:0 3px 10px rgba(79,209,197,0.6)">${gameWord}</span></div>`;
          newGameContainer.style.display = 'block';
        } else {
          // Still impostors remaining
          resultText.innerHTML = `<div style="font-size:22px;font-family:'Fredoka One',cursive;color:#ffc107">‚ö†Ô∏è Era un impostor!</div>` +
            `<div style="margin-top:8px" class="muted">Hab√©is expulsado a <strong>${executedPlayer.name}</strong>, pero quedan ${remainingImpostors} impostor${remainingImpostors>1?'es':''} m√°s.</div>` +
            `<div style="margin-top:12px"><button class="btn medium" id="continueGameBtn">Continuar partida</button></div>`;
          newGameContainer.style.display = 'none';
          
          setTimeout(() => {
            document.getElementById('continueGameBtn').addEventListener('click', () => {
              playClickSound();
              results.style.display = 'none';
              discussion.style.display = 'block';
              buildDiscussionVoteList();
            });
          }, 100);
        }
      } else {
        // Civilian eliminated - Game over, impostors win
        resultText.innerHTML = `<div style="font-size:24px;font-family:'Fredoka One',cursive;color:#ff3b3b">üíÄ ¬°Los IMPOSTORES ganan! üíÄ</div>` +
          `<div style="margin-top:8px" class="muted">Hab√©is expulsado a <strong>${executedPlayer.name}</strong>, que era un civil.</div>` +
          `<div style="margin-top:16px;font-size:18px;color:#d0d3e1">La palabra era: <span style="font-size:32px;color:#4fd1c5;font-family:'Fredoka One',cursive;text-shadow:0 3px 10px rgba(79,209,197,0.6)">${gameWord}</span></div>`;
        newGameContainer.style.display = 'block';
      }

      // reveal who were the impostors (only at game end)
      if(remainingImpostors === 0 || !isImpostor) {
        const impostorNames = players.filter(p=>p.role==='impostor').map(p=>p.name);
        const impostorText = impostorNames.map(name => `<span class="impostor-reveal">${name}</span>`).join('');
        impostorsReveal.innerHTML = `<div style="margin-bottom:8px;font-size:14px">Impostor${impostorNames.length>1?'es':''} ${impostorNames.length>1?'eran':'era'}:</div>` + impostorText;
      } else {
        impostorsReveal.innerHTML = '';
      }
    }

    newGame.addEventListener('click', ()=>{
      playClickSound();
      // reset votes and roles but keep player configuration
      players = [];
      setup.style.display = 'block';
      namesSection.style.display = 'none';
      pass.style.display = 'none';
      discussion.style.display = 'none';
      results.style.display = 'none';
      
      // Keep the current number of players and impostors
      playersDisplay.textContent = numPlayers;
      impostorsDisplay.textContent = numImpostors;
      categorySelection.style.display = 'none';
    });

    // --- INTRO HANDLER ---
    // IMPORTANTE: definir ANTES de usar en window.load
    function handleContinueFromIntro(){
      const introScreen = document.getElementById('introScreen');
      const mainContainer = document.getElementById('mainContainer');

      if(introScreen){
        introScreen.classList.add('fade-out');
        mainContainer.style.transition = 'opacity 0.5s ease-in';
        mainContainer.style.opacity = '1';
        setTimeout(() => {
          introScreen.remove();
        }, 500);
      } else {
        mainContainer.style.opacity = '1';
      }

      // Mostrar solo SETUP (selector de jugadores/impostores)
      setup.style.display = 'block';
      namesSection.style.display = 'none';
      pass.style.display = 'none';
      discussion.style.display = 'none';
      results.style.display = 'none';
      if(categorySelection) categorySelection.style.display = 'none';
    }

    // Botones
    if(continueBtn){
      continueBtn.addEventListener('click', ()=>{
        playSuccessSound();
        showNamesScreen();
      });
    }

    standardModeBtn.addEventListener('click', ()=>handleModeSelection(false));
    clueModeBtn.addEventListener('click', ()=>handleModeSelection(true));
    categoryModeBtn.addEventListener('click', showCategorySelection);

    startBtn.addEventListener('click', ()=>{
      unlockAudioWithUserGesture();
      playStartGameSound();
      startGame();
    });

    revealBtn.addEventListener('click', ()=>{
      unlockAudioWithUserGesture();
      playPopSound();
      showRoleFor(revealIndex);
    });

    nextBtn.addEventListener('click', ()=>{
      playClickSound();
      // hide role and move on
      roleArea.style.display = 'none';
      revealBtn.style.display = 'inline-block';
      nextBtn.style.display = 'none';
      revealBtn.disabled = false;

      revealIndex++;
      if(revealIndex < players.length){
        updatePlayerIndicator();
      } else {
        // all seen - show countdown before discussion
        pass.style.display = 'none';
        showCountdown();
      }
    });

    submitGroupVoteBtn.addEventListener('click', ()=>{
      const sel = Array.from(discussionVoteList.children).find(c=>c.classList.contains('selected'));
      if(!sel){
        alert('Selecciona a alguien para expulsar.');
        return;
      }
      playSuccessSound();
      const votedId = parseInt(sel.dataset.id);
      showResults(votedId);
    });

    // Intro: a los 3s se lanza autom√°ticamente handleContinueFromIntro()
    // PONER ESTE LISTENER AL FINAL DEL SCRIPT
    window.addEventListener('load', () => {
      setTimeout(() => {
        const introScreen = document.getElementById('introScreen');
        const mainContainer = document.getElementById('mainContainer');
        if(introScreen){
          handleContinueFromIntro();
        } else if(mainContainer && mainContainer.style.opacity === '0'){
          mainContainer.style.opacity = '1';
        }
      }, 3000);
    });
  </script>
</body>
</html>